<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹¼éŸ³-è‹±è¯­é…å¯¹æ¸¸æˆ | å„¿ç«¥å­¦ä¹ ä¸­æ–‡</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Arial Rounded MT Bold', sans-serif;
        }
        
        body {
            background-color: #f8f7ff;
            background-image: radial-gradient(#e1d9ff 1.5px, transparent 1.5px);
            background-size: 30px 30px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: #5a4fcf;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            width: 100%;
        }
        
        h1 {
            font-size: 2.8rem;
            color: #ff7b9c;
            margin-bottom: 10px;
            text-shadow: 3px 3px 0 #ffd166;
            letter-spacing: 1px;
        }
        
        .subtitle {
            font-size: 1.3rem;
            color: #5a4fcf;
            margin-bottom: 15px;
        }
        
        .instructions {
            background-color: #c8f7ff;
            border-radius: 20px;
            padding: 18px;
            margin-bottom: 25px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 8px 0 #9ad4e0;
            border: 3px solid #a8e6ff;
        }
        
        .instructions h2 {
            color: #5a4fcf;
            margin-bottom: 10px;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .instructions p {
            color: #5a4fcf;
            line-height: 1.5;
            font-size: 1.1rem;
        }
        
        .instructions i {
            color: #ff7b9c;
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            width: 100%;
            margin-bottom: 30px;
        }
        
        .game-board {
            flex: 1;
            min-width: 300px;
            max-width: 600px;
        }
        
        .card-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 25px;
            perspective: 1000px;
        }
        
        .card {
            height: 100px;
            background-color: #ffd166;
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8rem;
            font-weight: bold;
            color: #5a4fcf;
            cursor: pointer;
            user-select: none;
            transition: transform 0.3s, background-color 0.3s;
            box-shadow: 0 6px 0 #ffb347;
            border: 3px solid #fff;
            position: relative;
            overflow: hidden;
        }
        
        .card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
            background-size: 200% 200%;
            animation: shine 3s infinite;
        }
        
        @keyframes shine {
            0% { background-position: -100% -100%; }
            100% { background-position: 200% 200%; }
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 0 #ffb347;
        }
        
        .card.selected {
            background-color: #a8e6ff;
            box-shadow: 0 6px 0 #7bcde0;
            transform: scale(1.05);
        }
        
        .card.matched {
            visibility: hidden;
            pointer-events: none;
        }
        
        .card.pinyin {
            background-color: #c8f7ff;
            box-shadow: 0 6px 0 #9ad4e0;
        }
        
        .card.english {
            background-color: #ffb8de;
            box-shadow: 0 6px 0 #ff7b9c;
        }
        
        .card-label {
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 0.8rem;
            color: rgba(90, 79, 207, 0.7);
            font-weight: normal;
        }
        
        .matched-pairs {
            flex: 1;
            min-width: 250px;
            max-width: 400px;
            background-color: #e1d9ff;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 0 #c8b8ff;
            border: 3px solid #fff;
        }
        
        .matched-pairs h2 {
            color: #5a4fcf;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        .pairs-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .pair-item {
            background-color: #fff;
            padding: 12px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 0 #c8b8ff;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pair-pinyin {
            font-weight: bold;
            color: #ff7b9c;
            font-size: 1.2rem;
        }
        
        .pair-english {
            font-weight: bold;
            color: #5a4fcf;
            font-size: 1.2rem;
        }
        
        .custom-words {
            background-color: #c8f7ff;
            border-radius: 20px;
            padding: 25px;
            width: 90%;
            max-width: 800px;
            margin-bottom: 30px;
            box-shadow: 0 8px 0 #9ad4e0;
            border: 3px solid #a8e6ff;
        }
        
        .custom-words h2 {
            color: #5a4fcf;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .input-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        input {
            flex: 1;
            min-width: 200px;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            background-color: #fff;
            color: #5a4fcf;
            box-shadow: 0 4px 0 #9ad4e0;
        }
        
        input:focus {
            outline: none;
            box-shadow: 0 4px 0 #9ad4e0, 0 0 0 3px rgba(168, 230, 255, 0.5);
        }
        
        button {
            background-color: #ff7b9c;
            color: white;
            border: none;
            border-radius: 12px;
            padding: 15px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 6px 0 #e04a7a;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0 #e04a7a;
        }
        
        button:active {
            transform: translateY(0);
            box-shadow: 0 3px 0 #e04a7a;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        #resetBtn {
            background-color: #5a4fcf;
            box-shadow: 0 6px 0 #3a30af;
        }
        
        #resetBtn:hover {
            box-shadow: 0 9px 0 #3a30af;
        }
        
        #resetBtn:active {
            box-shadow: 0 3px 0 #3a30af;
        }
        
        .game-status {
            text-align: center;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #5a4fcf;
            font-weight: bold;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .success-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }
        
        .emoji {
            font-size: 8rem;
            animation: bounce 1s infinite alternate;
            margin-bottom: 20px;
        }
        
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-30px); }
        }
        
        .success-message {
            font-size: 3rem;
            color: #ff7b9c;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 3px 3px 0 #ffd166;
        }
        
        .word-input-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            background-color: #fff;
            padding: 10px 15px;
            border-radius: 12px;
            box-shadow: 0 4px 0 #9ad4e0;
        }
        
        .word-input-info i {
            color: #ff7b9c;
            font-size: 1.2rem;
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
                align-items: center;
            }
            
            .card-grid {
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: repeat(4, 1fr);
                gap: 10px;
            }
            
            .card {
                height: 80px;
                font-size: 1.5rem;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .emoji {
                font-size: 6rem;
            }
            
            .success-message {
                font-size: 2.2rem;
            }
        }
        
        @media (max-width: 480px) {
            .card-grid {
                grid-template-columns: repeat(4, 1fr);
                grid-template-rows: repeat(4, 1fr);
                gap: 8px;
            }
            
            .card {
                height: 70px;
                font-size: 1.2rem;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .input-group {
                flex-direction: column;
            }
            
            input, button {
                width: 100%;
            }
            
            .emoji {
                font-size: 5rem;
            }
            
            .success-message {
                font-size: 1.8rem;
            }
        }
        
        .footer {
            margin-top: 20px;
            color: #5a4fcf;
            text-align: center;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .selected-card {
            border: 4px dashed #ff7b9c;
        }
        
        .language-label {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            margin-left: 8px;
            background-color: #ff7b9c;
            color: white;
        }
        
        .pinyin-preview {
            margin-top: 10px;
            padding: 10px 15px;
            background-color: #fff;
            border-radius: 10px;
            font-size: 1rem;
            color: #5a4fcf;
            box-shadow: 0 4px 0 #9ad4e0;
            display: none;
        }
        
        .pinyin-preview.show {
            display: block;
        }
        
        .pinyin-preview span {
            color: #ff7b9c;
            font-weight: bold;
        }
        
        .word-counter {
            font-size: 0.9rem;
            color: #5a4fcf;
            text-align: right;
            margin-top: 5px;
        }
        
        .word-counter span {
            color: #ff7b9c;
            font-weight: bold;
        }
        
        .preview-area {
            background-color: #fff;
            border-radius: 12px;
            padding: 15px;
            margin-top: 15px;
            box-shadow: 0 4px 0 #9ad4e0;
            display: none;
        }
        
        .preview-area.show {
            display: block;
        }
        
        .preview-area h3 {
            color: #5a4fcf;
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .preview-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .preview-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px dashed #c8f7ff;
        }
        
        .preview-item:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-language"></i> æ‹¼éŸ³-è‹±è¯­é…å¯¹æ¸¸æˆ</h1>
            <p class="subtitle">å¸®åŠ©éæ¯è¯­å„¿ç«¥å­¦ä¹ ä¸­æ–‡æ‹¼éŸ³å’Œè‹±è¯­æ„æ€</p>
        </header>
        
        <div class="instructions">
            <h2><i class="fas fa-gamepad"></i> æ¸¸æˆè¯´æ˜</h2>
            <p>1. ç‚¹å‡»ä¸€ä¸ªæ‹¼éŸ³å¡ç‰‡ï¼Œç„¶åç‚¹å‡»ä¸€ä¸ªè‹±è¯­å¡ç‰‡ï¼Œå°è¯•åŒ¹é…å®ƒä»¬çš„æ„æ€ã€‚</p>
            <p>2. å¦‚æœåŒ¹é…æˆåŠŸï¼Œå¡ç‰‡ä¼šæ¶ˆå¤±å¹¶æ˜¾ç¤ºåœ¨ä¸‹æ–¹åˆ—è¡¨ä¸­ï¼ŒåŒæ—¶æ’­æ”¾æˆåŠŸéŸ³æ•ˆã€‚</p>
            <p>3. å¦‚æœåŒ¹é…å¤±è´¥ï¼Œå¡ç‰‡ä¼šæ¢å¤åŸçŠ¶ï¼Œæ’­æ”¾é”™è¯¯éŸ³æ•ˆã€‚</p>
            <p>4. åŒ¹é…å®Œæ‰€æœ‰8å¯¹å¡ç‰‡åï¼Œæ¸¸æˆèƒœåˆ©ï¼</p>
        </div>
        
        <div class="game-status">
            <i class="fas fa-star"></i>
            <span id="statusText">å·²åŒ¹é… <span id="matchedCount">0</span> å¯¹ï¼Œå…±8å¯¹</span>
        </div>
        
        <div class="game-area">
            <div class="game-board">
                <div class="card-grid" id="cardGrid">
                    <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
                
                <div class="game-controls">
                    <button id="resetBtn">
                        <i class="fas fa-redo"></i> é‡ç½®æ¸¸æˆ
                    </button>
                </div>
            </div>
            
            <div class="matched-pairs">
                <h2><i class="fas fa-check-circle"></i> å·²åŒ¹é…çš„è¯è¯­</h2>
                <div class="pairs-list" id="pairsList">
                    <!-- å·²åŒ¹é…çš„è¯è¯­ä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                </div>
            </div>
        </div>
        
        <div class="custom-words">
            <h2><i class="fas fa-plus-circle"></i> è‡ªå®šä¹‰è¯è¯­</h2>
            
            <div class="word-input-info">
                <i class="fas fa-info-circle"></i>
                <p>è¯·è¾“å…¥è‹±æ–‡å•è¯ï¼Œä»¥é€—å·åˆ†éš”ï¼Œä¸€æ¬¡æœ€å¤šè¾“å…¥8ä¸ªå•è¯ã€‚ä¾‹å¦‚ï¼šred, apple, cat, dog</p>
            </div>
            
            <div class="input-group">
                <input type="text" id="englishInput" placeholder="è¾“å…¥è‹±æ–‡å•è¯ï¼Œä»¥é€—å·åˆ†éš”ï¼Œä¾‹å¦‚: red, apple, car, dog">
                <button id="addWordBtn">
                    <i class="fas fa-plus"></i> æ‰¹é‡æ·»åŠ 
                </button>
            </div>
            
            <div class="word-counter">
                å½“å‰è¾“å…¥: <span id="wordCount">0</span> ä¸ªå•è¯ (æœ€å¤š8ä¸ª)
            </div>
            
            <div class="preview-area" id="previewArea">
                <h3><i class="fas fa-eye"></i> é¢„è§ˆå³å°†ç”Ÿæˆçš„è¯è¯­</h3>
                <div class="preview-list" id="previewList">
                    <!-- é¢„è§ˆå†…å®¹ä¼šåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
            
            <p style="color: #5a4fcf; font-size: 0.9rem; margin-top: 15px;">å½“å‰è¯è¯­: <span id="currentWordsList">çº¢è‰² (hÃ³ng sÃ¨) - red, æ©™è‰² (chÃ©ng sÃ¨) - orange, é»‘è‰² (hÄ“i sÃ¨) - black, ç™½è‰² (bÃ¡i sÃ¨) - white, é»„è‰² (huÃ¡ng sÃ¨) - yellow, ç»¿è‰² (lÇœ sÃ¨) - green, è“è‰² (lÃ¡n sÃ¨) - blue, é‡‘è‰² (jÄ«n sÃ¨) - gold</span></p>
        </div>
        
        <div class="success-animation" id="successAnimation">
            <div class="emoji">ğŸ‰</div>
            <div class="success-message">å¤ªæ£’äº†ï¼å…¨éƒ¨é…å¯¹æˆåŠŸï¼</div>
            <div class="emoji">ğŸ†</div>
            <button id="playAgainBtn" style="margin-top: 30px; padding: 20px 40px; font-size: 1.3rem;">
                <i class="fas fa-play-circle"></i> å†ç©ä¸€æ¬¡
            </button>
        </div>
        
        <div class="footer">
            <p>è®¾è®¡ç”¨äºå¸®åŠ©éæ¯è¯­å„¿ç«¥å­¦ä¹ ä¸­æ–‡æ‹¼éŸ³å’Œè‹±è¯­æ„æ€ | é€‚é…ç”µè„‘å’Œæ‰‹æœºé¡µé¢</p>
        </div>
    </div>

    <!-- éŸ³é¢‘å…ƒç´ ç”¨äºæ’­æ”¾éŸ³æ•ˆ -->
    <audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-correct-answer-tone-2870.mp3" preload="auto"></audio>
    <audio id="errorSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" preload="auto"></audio>
    <audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>

    <script>
        // é¢„è®¾è¯æ±‡
        let wordPairs = [
            { pinyin: "hÃ³ng sÃ¨", english: "red" },
            { pinyin: "chÃ©ng sÃ¨", english: "orange" },
            { pinyin: "hÄ“i sÃ¨", english: "black" },
            { pinyin: "bÃ¡i sÃ¨", english: "white" },
            { pinyin: "huÃ¡ng sÃ¨", english: "yellow" },
            { pinyin: "lÇœ sÃ¨", english: "green" },
            { pinyin: "lÃ¡n sÃ¨", english: "blue" },
            { pinyin: "jÄ«n sÃ¨", english: "gold" }
        ];
        
        // å¸¸è§è‹±æ–‡å•è¯åˆ°æ‹¼éŸ³çš„æ˜ å°„
        const englishToPinyinMap = {
            // é¢œè‰²
            "red": "hÃ³ng sÃ¨",
            "orange": "chÃ©ng sÃ¨",
            "yellow": "huÃ¡ng sÃ¨",
            "green": "lÇœ sÃ¨",
            "blue": "lÃ¡n sÃ¨",
            "purple": "zÇ sÃ¨",
            "pink": "fÄ›n hÃ³ng sÃ¨",
            "brown": "zÅng sÃ¨",
            "black": "hÄ“i sÃ¨",
            "white": "bÃ¡i sÃ¨",
            "gray": "huÄ« sÃ¨",
            "gold": "jÄ«n sÃ¨",
            "silver": "yÃ­n sÃ¨",
            
            // åŠ¨ç‰©
            "cat": "mÄo",
            "dog": "gÇ’u",
            "bird": "niÇo",
            "fish": "yÃº",
            "rabbit": "tÃ¹ zi",
            "tiger": "lÇo hÇ”",
            "lion": "shÄ« zi",
            "elephant": "dÃ  xiÃ ng",
            "monkey": "hÃ³u zi",
            "horse": "mÇ",
            "cow": "niÃº",
            "sheep": "yÃ¡ng",
            
            // æ°´æœ
            "apple": "pÃ­ng guÇ’",
            "banana": "xiÄng jiÄo",
            "grape": "pÃº tÃ¡o",
            "watermelon": "xÄ« guÄ",
            "strawberry": "cÇo mÃ©i",
            "pear": "lÃ­",
            "peach": "tÃ¡o zi",
            
            // å®¶åº­
            "father": "bÃ  ba",
            "mother": "mÄ ma",
            "brother": "gÄ“ ge",
            "sister": "jiÄ› jie",
            "grandfather": "yÃ© ye",
            "grandmother": "nÇi nai",
            
            // æ—¥å¸¸ç‰©å“
            "car": "qÃ¬ chÄ“",
            "house": "fÃ¡ng zi",
            "book": "shÅ«",
            "pen": "bÇ",
            "desk": "shÅ« zhuÅ",
            "chair": "yÇ zi",
            "phone": "shÇ’u jÄ«",
            "computer": "diÃ n nÇo",
            
            // é£Ÿç‰©
            "rice": "mÇ fÃ n",
            "noodles": "miÃ n tiÃ¡o",
            "bread": "miÃ n bÄo",
            "water": "shuÇ",
            "milk": "niÃº nÇi",
            "tea": "chÃ¡",
            "coffee": "kÄ fÄ“i",
            
            // è‡ªç„¶
            "sun": "tÃ i yÃ¡ng",
            "moon": "yuÃ¨ liang",
            "star": "xÄ«ng xing",
            "tree": "shÃ¹",
            "flower": "huÄ",
            "river": "hÃ©",
            "mountain": "shÄn",
            
            // æ•°å­—
            "one": "yÄ«",
            "two": "Ã¨r",
            "three": "sÄn",
            "four": "sÃ¬",
            "five": "wÇ”",
            "six": "liÃ¹",
            "seven": "qÄ«",
            "eight": "bÄ",
            "nine": "jiÇ”",
            "ten": "shÃ­"
        };
        
        // æ¸¸æˆçŠ¶æ€å˜é‡
        let selectedCard = null;
        let matchedPairs = [];
        let canSelect = true;
        
        // DOMå…ƒç´ 
        const cardGrid = document.getElementById('cardGrid');
        const pairsList = document.getElementById('pairsList');
        const statusText = document.getElementById('statusText');
        const matchedCount = document.getElementById('matchedCount');
        const englishInput = document.getElementById('englishInput');
        const addWordBtn = document.getElementById('addWordBtn');
        const resetBtn = document.getElementById('resetBtn');
        const successAnimation = document.getElementById('successAnimation');
        const playAgainBtn = document.getElementById('playAgainBtn');
        const currentWordsList = document.getElementById('currentWordsList');
        const previewArea = document.getElementById('previewArea');
        const previewList = document.getElementById('previewList');
        const wordCount = document.getElementById('wordCount');
        
        // éŸ³æ•ˆ
        const successSound = document.getElementById('successSound');
        const errorSound = document.getElementById('errorSound');
        const winSound = document.getElementById('winSound');
        
        // æ ¹æ®è‹±æ–‡å•è¯ç”Ÿæˆæ‹¼éŸ³
        function generatePinyin(englishWord) {
            // è½¬æ¢ä¸ºå°å†™å¹¶å»é™¤ç©ºæ ¼
            const word = englishWord.trim().toLowerCase();
            
            // å¦‚æœå•è¯åœ¨æ˜ å°„è¡¨ä¸­ï¼Œç›´æ¥è¿”å›å¯¹åº”çš„æ‹¼éŸ³
            if (englishToPinyinMap[word]) {
                return englishToPinyinMap[word];
            }
            
            // å¦‚æœå•è¯åŒ…å«ç©ºæ ¼ï¼Œå¯èƒ½æ˜¯çŸ­è¯­
            if (word.includes(' ')) {
                const words = word.split(' ');
                let pinyinPhrase = '';
                
                for (const w of words) {
                    if (englishToPinyinMap[w]) {
                        pinyinPhrase += englishToPinyinMap[w] + ' ';
                    } else {
                        // å¯¹äºä¸åœ¨æ˜ å°„è¡¨ä¸­çš„å•è¯ï¼Œä½¿ç”¨ç®€å•è§„åˆ™ç”Ÿæˆè¿‘ä¼¼æ‹¼éŸ³
                        pinyinPhrase += generateSimplePinyin(w) + ' ';
                    }
                }
                
                return pinyinPhrase.trim();
            }
            
            // å¯¹äºä¸åœ¨æ˜ å°„è¡¨ä¸­çš„å•è¯ï¼Œä½¿ç”¨ç®€å•è§„åˆ™ç”Ÿæˆè¿‘ä¼¼æ‹¼éŸ³
            return generateSimplePinyin(word);
        }
        
        // ç®€å•è§„åˆ™ç”Ÿæˆæ‹¼éŸ³ï¼ˆç”¨äºä¸åœ¨æ˜ å°„è¡¨ä¸­çš„å•è¯ï¼‰
        function generateSimplePinyin(englishWord) {
            // ç®€å•çš„è‹±æ–‡åˆ°æ‹¼éŸ³è½¬æ¢è§„åˆ™ï¼ˆç®€åŒ–ç‰ˆï¼‰
            const pinyinRules = {
                // å¼€å¤´å­—æ¯è§„åˆ™
                'a': 'Ä', 'e': 'Ä“', 'i': 'Ä«', 'o': 'Å', 'u': 'Å«',
                // å¸¸è§ç»“å°¾
                'tion': 'shÄ“n', 'sion': 'shÄ“n', 'ing': 'yÄ«ng', 'ed': 'dÃ©',
                'er': 'Ä›r', 'ly': 'lÃ¬', 'ty': 'tÃ­', 'ry': 'ruÃ¬'
            };
            
            let word = englishWord.toLowerCase();
            let pinyin = '';
            
            // ç®€å•é•¿åº¦è§„åˆ™ï¼šçŸ­å•è¯ç›´æ¥è½¬æ¢
            if (word.length <= 3) {
                // å¯¹äºçŸ­å•è¯ï¼Œç›´æ¥ä½¿ç”¨å­—æ¯å‘éŸ³
                for (let i = 0; i < word.length; i++) {
                    const letter = word[i];
                    if (letter === 'a') pinyin += 'Ä';
                    else if (letter === 'e') pinyin += 'Ä“';
                    else if (letter === 'i') pinyin += 'Ä«';
                    else if (letter === 'o') pinyin += 'Å';
                    else if (letter === 'u') pinyin += 'Å«';
                    else pinyin += letter;
                }
            } else {
                // å¯¹äºé•¿å•è¯ï¼Œä½¿ç”¨ç®€åŒ–è½¬æ¢
                // å–å‰3ä¸ªå­—æ¯å’Œå2ä¸ªå­—æ¯ç»„åˆ
                const prefix = word.substring(0, 3);
                const suffix = word.substring(word.length - 2);
                
                // åº”ç”¨ä¸€äº›å¸¸è§è§„åˆ™
                if (word.endsWith('tion')) {
                    pinyin = word.substring(0, word.length - 4) + 'shÄ“n';
                } else if (word.endsWith('ing')) {
                    pinyin = word.substring(0, word.length - 3) + 'yÄ«ng';
                } else if (word.endsWith('er')) {
                    pinyin = word.substring(0, word.length - 2) + 'Ä›r';
                } else {
                    // é»˜è®¤è§„åˆ™ï¼šå–å‰3ä¸ªå­—æ¯
                    pinyin = prefix;
                }
            }
            
            // ç¡®ä¿æ‹¼éŸ³é•¿åº¦é€‚ä¸­
            if (pinyin.length > 6) {
                pinyin = pinyin.substring(0, 6);
            }
            
            // æ·»åŠ å£°è°ƒï¼ˆç®€å•æ¨¡æ‹Ÿï¼‰
            const tones = ['', 'Ë‰', 'ËŠ', 'Ë‡', 'Ë‹'];
            const randomTone = tones[Math.floor(Math.random() * tones.length)];
            pinyin += randomTone;
            
            return pinyin;
        }
        
        // åˆå§‹åŒ–æ¸¸æˆ
        function initGame() {
            // æ¸…ç©ºæ¸¸æˆæ¿
            cardGrid.innerHTML = '';
            pairsList.innerHTML = '';
            matchedPairs = [];
            selectedCard = null;
            canSelect = true;
            updateStatus();
            
            // åˆ›å»ºå¡ç‰‡æ•°ç»„ï¼ˆæ‹¼éŸ³å’Œè‹±è¯­å„8å¼ ï¼‰
            let cards = [];
            
            // æ·»åŠ æ‹¼éŸ³å¡ç‰‡
            wordPairs.forEach(pair => {
                cards.push({
                    type: 'pinyin',
                    content: pair.pinyin,
                    match: pair.english
                });
            });
            
            // æ·»åŠ è‹±è¯­å¡ç‰‡
            wordPairs.forEach(pair => {
                cards.push({
                    type: 'english',
                    content: pair.english,
                    match: pair.pinyin
                });
            });
            
            // éšæœºæ‰“ä¹±å¡ç‰‡é¡ºåº
            cards = shuffleArray(cards);
            
            // åˆ›å»ºå¡ç‰‡å…ƒç´ 
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = `card ${card.type}`;
                cardElement.dataset.index = index;
                cardElement.dataset.type = card.type;
                cardElement.dataset.content = card.content;
                cardElement.dataset.match = card.match;
                
                // æ·»åŠ è¯­è¨€æ ‡ç­¾
                const label = document.createElement('div');
                label.className = 'card-label';
                label.textContent = card.type === 'pinyin' ? 'æ‹¼éŸ³' : 'è‹±æ–‡';
                cardElement.appendChild(label);
                
                // æ·»åŠ å¡ç‰‡å†…å®¹
                const content = document.createElement('div');
                content.textContent = card.type === 'pinyin' ? card.content : card.content.toUpperCase();
                cardElement.appendChild(content);
                
                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                cardElement.addEventListener('click', () => handleCardClick(cardElement));
                
                cardGrid.appendChild(cardElement);
            });
        }
        
        // å¤„ç†å¡ç‰‡ç‚¹å‡»
        function handleCardClick(card) {
            // å¦‚æœæ¸¸æˆä¸èƒ½é€‰æ‹©æˆ–å¡ç‰‡å·²åŒ¹é…ï¼Œåˆ™è¿”å›
            if (!canSelect || card.classList.contains('matched') || card.classList.contains('selected')) {
                return;
            }
            
            // å¦‚æœå·²ç»é€‰æ‹©äº†ä¸€å¼ å¡ç‰‡
            if (selectedCard) {
                // å¦‚æœç‚¹å‡»çš„æ˜¯åŒä¸€å¼ å¡ç‰‡ï¼Œåˆ™å–æ¶ˆé€‰æ‹©
                if (selectedCard === card) {
                    selectedCard.classList.remove('selected');
                    selectedCard = null;
                    return;
                }
                
                // æ£€æŸ¥æ˜¯å¦åŒ¹é…
                const isMatch = 
                    (selectedCard.dataset.type === 'pinyin' && card.dataset.type === 'english' && 
                     selectedCard.dataset.match === card.dataset.content) ||
                    (selectedCard.dataset.type === 'english' && card.dataset.type === 'pinyin' && 
                     selectedCard.dataset.match === card.dataset.content);
                
                // ä¸´æ—¶æ˜¾ç¤ºç¬¬äºŒå¼ å¡ç‰‡
                card.classList.add('selected');
                
                // ç¦ç”¨é€‰æ‹©
                canSelect = false;
                
                // æ£€æŸ¥åŒ¹é…ç»“æœ
                if (isMatch) {
                    // åŒ¹é…æˆåŠŸ
                    setTimeout(() => {
                        // æ’­æ”¾æˆåŠŸéŸ³æ•ˆ
                        successSound.currentTime = 0;
                        successSound.play();
                        
                        // å°†å¡ç‰‡æ ‡è®°ä¸ºå·²åŒ¹é…
                        selectedCard.classList.add('matched');
                        card.classList.add('matched');
                        
                        // æ·»åŠ åˆ°å·²åŒ¹é…åˆ—è¡¨
                        addMatchedPair(selectedCard, card);
                        
                        // é‡ç½®é€‰æ‹©
                        selectedCard = null;
                        
                        // æ¢å¤é€‰æ‹©èƒ½åŠ›
                        canSelect = true;
                        
                        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                        checkGameComplete();
                    }, 600);
                } else {
                    // åŒ¹é…å¤±è´¥
                    setTimeout(() => {
                        // æ’­æ”¾é”™è¯¯éŸ³æ•ˆ
                        errorSound.currentTime = 0;
                        errorSound.play();
                        
                        // ç§»é™¤é€‰ä¸­çŠ¶æ€
                        selectedCard.classList.remove('selected');
                        card.classList.remove('selected');
                        
                        // é‡ç½®é€‰æ‹©
                        selectedCard = null;
                        
                        // æ¢å¤é€‰æ‹©èƒ½åŠ›
                        canSelect = true;
                    }, 1000);
                }
            } else {
                // é€‰æ‹©ç¬¬ä¸€å¼ å¡ç‰‡
                card.classList.add('selected');
                selectedCard = card;
            }
        }
        
        // æ·»åŠ åŒ¹é…å¯¹åˆ°åˆ—è¡¨
        function addMatchedPair(card1, card2) {
            // ç¡®å®šæ‹¼éŸ³å’Œè‹±è¯­
            let pinyin, english;
            if (card1.dataset.type === 'pinyin') {
                pinyin = card1.dataset.content;
                english = card2.dataset.content;
            } else {
                pinyin = card2.dataset.content;
                english = card1.dataset.content;
            }
            
            // æ·»åŠ åˆ°åŒ¹é…å¯¹æ•°ç»„
            matchedPairs.push({ pinyin, english: english.toLowerCase() });
            
            // åˆ›å»ºåˆ—è¡¨é¡¹
            const pairItem = document.createElement('div');
            pairItem.className = 'pair-item';
            
            const pairPinyin = document.createElement('div');
            pairPinyin.className = 'pair-pinyin';
            pairPinyin.textContent = pinyin;
            
            const pairEnglish = document.createElement('div');
            pairEnglish.className = 'pair-english';
            pairEnglish.textContent = english.toUpperCase();
            
            pairItem.appendChild(pairPinyin);
            pairItem.appendChild(pairEnglish);
            
            pairsList.appendChild(pairItem);
            
            // æ›´æ–°çŠ¶æ€
            updateStatus();
        }
        
        // æ›´æ–°æ¸¸æˆçŠ¶æ€
        function updateStatus() {
            matchedCount.textContent = matchedPairs.length;
            
            if (matchedPairs.length === 8) {
                statusText.innerHTML = '<i class="fas fa-check-circle"></i> æ­å–œï¼å…¨éƒ¨é…å¯¹å®Œæˆï¼';
            }
        }
        
        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦å®Œæˆ
        function checkGameComplete() {
            if (matchedPairs.length === 8) {
                // å»¶è¿Ÿæ˜¾ç¤ºèƒœåˆ©åŠ¨ç”»
                setTimeout(() => {
                    // æ’­æ”¾èƒœåˆ©éŸ³æ•ˆ
                    winSound.currentTime = 0;
                    winSound.play();
                    
                    // æ˜¾ç¤ºèƒœåˆ©åŠ¨ç”»
                    successAnimation.style.display = 'flex';
                    
                    // æ·»åŠ ä¸€äº›éšæœºemoji
                    const emojis = ['ğŸˆ', 'ğŸŠ', 'ğŸ¥³', 'ğŸ‘', 'ğŸ‘', 'ğŸŒŸ', 'ğŸ’«', 'ğŸŒˆ'];
                    const extraEmojis = document.createElement('div');
                    extraEmojis.style.fontSize = '3rem';
                    extraEmojis.style.marginTop = '20px';
                    extraEmojis.style.display = 'flex';
                    extraEmojis.style.gap = '15px';
                    extraEmojis.style.flexWrap = 'wrap';
                    extraEmojis.style.justifyContent = 'center';
                    
                    emojis.forEach(emoji => {
                        const span = document.createElement('span');
                        span.textContent = emoji;
                        span.style.animation = 'bounce 1.5s infinite alternate';
                        span.style.animationDelay = `${Math.random() * 1}s`;
                        extraEmojis.appendChild(span);
                    });
                    
                    successAnimation.appendChild(extraEmojis);
                }, 500);
            }
        }
        
        // è§£æè¾“å…¥çš„è‹±æ–‡å•è¯ï¼ˆä»¥é€—å·åˆ†éš”ï¼‰
        function parseEnglishWords(inputText) {
            // æŒ‰é€—å·åˆ†éš”ï¼Œå»é™¤ç©ºæ ¼ï¼Œè¿‡æ»¤ç©ºå­—ç¬¦ä¸²
            const words = inputText.split(',')
                .map(word => word.trim())
                .filter(word => word.length > 0);
            
            return words;
        }
        
        // æ›´æ–°é¢„è§ˆåŒºåŸŸ
        function updatePreview() {
            const inputText = englishInput.value;
            const words = parseEnglishWords(inputText);
            
            // æ›´æ–°å•è¯è®¡æ•°
            wordCount.textContent = words.length;
            
            // å¦‚æœå•è¯æ•°é‡è¶…è¿‡8ä¸ªï¼Œæˆªæ–­
            if (words.length > 8) {
                wordCount.innerHTML = `<span style="color:#ff0000;">${words.length}</span>`;
            }
            
            // æ¸…ç©ºé¢„è§ˆåˆ—è¡¨
            previewList.innerHTML = '';
            
            // å¦‚æœæœ‰å•è¯ï¼Œæ˜¾ç¤ºé¢„è§ˆåŒºåŸŸ
            if (words.length > 0) {
                previewArea.classList.add('show');
                
                // æ·»åŠ é¢„è§ˆé¡¹ç›®ï¼ˆæœ€å¤šæ˜¾ç¤º8ä¸ªï¼‰
                const displayWords = words.slice(0, 8);
                
                displayWords.forEach((word, index) => {
                    const pinyin = generatePinyin(word);
                    const previewItem = document.createElement('div');
                    previewItem.className = 'preview-item';
                    
                    const englishSpan = document.createElement('span');
                    englishSpan.textContent = word.toUpperCase();
                    englishSpan.style.fontWeight = 'bold';
                    englishSpan.style.color = '#5a4fcf';
                    
                    const pinyinSpan = document.createElement('span');
                    pinyinSpan.textContent = pinyin;
                    pinyinSpan.style.color = '#ff7b9c';
                    
                    previewItem.appendChild(englishSpan);
                    previewItem.appendChild(pinyinSpan);
                    
                    previewList.appendChild(previewItem);
                });
                
                // å¦‚æœè¾“å…¥è¶…è¿‡8ä¸ªå•è¯ï¼Œæ˜¾ç¤ºæç¤º
                if (words.length > 8) {
                    const warningItem = document.createElement('div');
                    warningItem.className = 'preview-item';
                    warningItem.innerHTML = `<span style="color:#ff0000; font-size:0.9rem;">æ³¨æ„: æœ€å¤šåªèƒ½è¾“å…¥8ä¸ªå•è¯ï¼Œå¤šä½™çš„å°†è¢«å¿½ç•¥</span>`;
                    previewList.appendChild(warningItem);
                }
            } else {
                previewArea.classList.remove('show');
            }
        }
        
        // æ‰¹é‡æ·»åŠ è‡ªå®šä¹‰è¯è¯­
        function addCustomWords() {
            const inputText = englishInput.value.trim();
            
            if (!inputText) {
                alert('è¯·è¾“å…¥è‹±æ–‡å•è¯ï¼');
                return;
            }
            
            // è§£æè¾“å…¥çš„å•è¯
            let words = parseEnglishWords(inputText);
            
            // é™åˆ¶æœ€å¤š8ä¸ªå•è¯
            if (words.length > 8) {
                alert('æœ€å¤šåªèƒ½è¾“å…¥8ä¸ªå•è¯ï¼Œå¤šä½™çš„å°†è¢«å¿½ç•¥ã€‚');
                words = words.slice(0, 8);
            }
            
            if (words.length === 0) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„è‹±æ–‡å•è¯ï¼');
                return;
            }
            
            // ç”Ÿæˆæ–°è¯è¯­å¯¹
            const newPairs = words.map(word => {
                const pinyin = generatePinyin(word);
                return { pinyin, english: word.toLowerCase() };
            });
            
            // ç¡®å®šè¦æ›¿æ¢å¤šå°‘ä¸ªåŸæœ‰è¯è¯­
            const replaceCount = Math.min(newPairs.length, wordPairs.length);
            
            // éšæœºé€‰æ‹©è¦æ›¿æ¢çš„ä½ç½®
            const positions = Array.from({length: wordPairs.length}, (_, i) => i);
            shuffleArray(positions);
            const positionsToReplace = positions.slice(0, replaceCount);
            
            // æ›¿æ¢åŸæœ‰è¯è¯­
            for (let i = 0; i < replaceCount; i++) {
                wordPairs[positionsToReplace[i]] = newPairs[i];
            }
            
            // å¦‚æœæ–°è¯è¯­æ•°é‡å°‘äº8ä¸ªï¼ŒåŸæœ‰è¯è¯­ä¿æŒä¸å˜
            // å¦‚æœæ–°è¯è¯­æ•°é‡ç­‰äº8ä¸ªï¼Œåˆ™å…¨éƒ¨æ›¿æ¢
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            englishInput.value = '';
            
            // éšè—é¢„è§ˆåŒºåŸŸ
            previewArea.classList.remove('show');
            
            // æ›´æ–°å•è¯è®¡æ•°
            wordCount.textContent = '0';
            
            // æ›´æ–°å½“å‰è¯è¯­åˆ—è¡¨æ˜¾ç¤º
            updateCurrentWordsList();
            
            // é‡æ–°åˆå§‹åŒ–æ¸¸æˆ
            initGame();
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            if (replaceCount === 1) {
                alert(`å·²æ·»åŠ  ${replaceCount} ä¸ªæ–°è¯è¯­å¹¶æ›¿æ¢äº† ${replaceCount} ä¸ªåŸæœ‰è¯è¯­ï¼`);
            } else {
                alert(`å·²æ·»åŠ  ${replaceCount} ä¸ªæ–°è¯è¯­å¹¶æ›¿æ¢äº† ${replaceCount} ä¸ªåŸæœ‰è¯è¯­ï¼`);
            }
        }
        
        // æ›´æ–°å½“å‰è¯è¯­åˆ—è¡¨æ˜¾ç¤º
        function updateCurrentWordsList() {
            const wordsText = wordPairs.map(pair => 
                `${pair.pinyin} - ${pair.english.toUpperCase()}`
            ).join(', ');
            
            currentWordsList.textContent = wordsText;
        }
        
        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            initGame();
            successAnimation.style.display = 'none';
            
            // ç§»é™¤åŠ¨æ€æ·»åŠ çš„emoji
            const extraEmojis = successAnimation.querySelector('div:last-child');
            if (extraEmojis && extraEmojis.style.fontSize === '3rem') {
                successAnimation.removeChild(extraEmojis);
            }
        }
        
        // å·¥å…·å‡½æ•°ï¼šéšæœºæ‰“ä¹±æ•°ç»„
        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }
        
        // äº‹ä»¶ç›‘å¬å™¨
        addWordBtn.addEventListener('click', addCustomWords);
        resetBtn.addEventListener('click', resetGame);
        playAgainBtn.addEventListener('click', resetGame);
        
        // è¾“å…¥è‹±æ–‡æ—¶å®æ—¶æ›´æ–°é¢„è§ˆ
        englishInput.addEventListener('input', updatePreview);
        
        // å…è®¸æŒ‰å›è½¦é”®æ·»åŠ è¯è¯­
        englishInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                addCustomWords();
            }
        });
        
        // åˆå§‹åŒ–æ¸¸æˆ
        window.addEventListener('DOMContentLoaded', () => {
            initGame();
            updateCurrentWordsList();
        });
    </script>
</body>
</html>